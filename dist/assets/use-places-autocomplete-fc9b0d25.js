import{r as i}from"./react-a6e30971.js";function w(){return w=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},w.apply(this,arguments)}var K=function(s){var r=i.useRef(s);return r.current=s,r},T=function(s,r){var e;return function(){for(var n=this,c=arguments.length,l=new Array(c),o=0;o<c;o++)l[o]=arguments[o];e!==null&&(clearTimeout(e),e=null),e=setTimeout(function(){return s.apply(n,l)},r)}},k="ðŸ’¡ use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library",B=function(r){var e=r===void 0?{}:r,n=e.requestOptions,c=e.debounce,l=c===void 0?200:c,o=e.cache,g=o===void 0?24*60*60:o,O=e.cacheKey,L=e.googleMaps,d=e.callbackName,y=e.defaultValue,V=y===void 0?"":y,P=e.initOnMount,x=P===void 0?!0:P,A=i.useState(!1),G=A[0],E=A[1],C=i.useState(V),I=C[0],N=C[1],M=i.useState({loading:!1,status:"",data:[]}),j=M[0],p=M[1],v=i.useRef(null),q=K(n),R=K(L),h=O?"upa-"+O:"upa",m=i.useCallback(function(){var a;if(!v.current){var t=window,u=t.google,f=R.current,S=(f==null?void 0:f.places)||(u==null||(a=u.maps)==null?void 0:a.places);if(!S){console.error(k);return}v.current=new S.AutocompleteService,E(!0)}},[]),b=i.useCallback(function(){p({loading:!1,status:"",data:[]})},[]),$=i.useCallback(function(){try{sessionStorage.removeItem(h)}catch{}},[]),_=i.useCallback(T(function(a){if(!a){b();return}p(function(u){return w({},u,{loading:!0})});var t={};try{t=JSON.parse(sessionStorage.getItem(h)||"{}")}catch{}if(g&&(t=Object.keys(t).reduce(function(u,f){return t[f].maxAge-Date.now()>=0&&(u[f]=t[f]),u},{}),t[a])){p({loading:!1,status:"OK",data:t[a].data});return}v.current.getPlacePredictions(w({},q.current,{input:a}),function(u,f){if(p({loading:!1,status:f,data:u||[]}),g&&f==="OK"){t[a]={data:u,maxAge:Date.now()+g*1e3};try{sessionStorage.setItem(h,JSON.stringify(t))}catch{}}})},l),[l,b]),J=i.useCallback(function(a,t){t===void 0&&(t=!0),N(a),v.current&&t&&_(a)},[_]);return i.useEffect(function(){if(!x)return function(){return null};var a=window,t=a.google;return!R.current&&!(t!=null&&t.maps)&&d?window[d]=m:m(),function(){window[d]&&delete window[d]}},[d,m]),{ready:G,value:I,suggestions:j,setValue:J,clearSuggestions:b,clearCache:$,init:m}},D="ðŸ’¡ use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.",H=function(r){var e=new window.google.maps.Geocoder;return new Promise(function(n,c){e.geocode(r,function(l,o){o!=="OK"&&c(o),!r.address&&r.componentRestrictions&&(console.error(D),n(l)),n(l)})})},Q=function(r){return new Promise(function(e,n){try{var c=r.geometry.location,l=c.lat,o=c.lng;e({lat:l(),lng:o()})}catch(g){n(g)}})};export{Q as a,H as g,B as u};
